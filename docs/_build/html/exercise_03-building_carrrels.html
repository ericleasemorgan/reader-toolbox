
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Exercise: Building carrels &#8212; Reader Toolbox  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Structure of a carrel" href="structure.html" />
    <link rel="prev" title="Commands" href="commands.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="exercise-building-carrels">
<h1>Exercise: Building carrels<a class="headerlink" href="#exercise-building-carrels" title="Permalink to this headline">¶</a></h1>
<p>In this section you will build two study carrels (“data sets”). The first will be from sample data. The second will be from content of your own.</p>
<p>By far, the creation of study carrels is the most complicated in the Toolbox. Moreover, it is the whole point of the Reader. Everything else is extra. Given a study carrel (which is made up basic plain text files and a relational database), the astute student, researcher, or scholar can do all sort of anaysis without the balance of the Toolbox commands. One can create a study carrel, put it on the Web, give to others, compute against it using applications that are decades old, compute against it using existing applications, compute against it using applications that have yet to be invented, use it as input to machine learning models, use it as a hub for collaborative efforts, create collections of carrels and call the results a library, etc.</p>
<p>Creating carrels requires practice, but it is not rocket surgery, and after practice you might find yourself creating carrels for everthing. Your email. That blog. Twitter feeds. The whole of Charles Dickens’ works. Sets of annual reports. Everything in your assigned reading list. “When you have a hammer, everything begins to look like a nail.”</p>
<section id="from-sample-data">
<h2>From sample data<a class="headerlink" href="#from-sample-data" title="Permalink to this headline">¶</a></h2>
<p>In this exercise, you will build a study carrel based on sample data. Let’s go:</p>
<blockquote>
<div><ol class="arabic">
<li><p>download the <em>Iliad</em> and the <em>Odyssey</em> from <a class="reference external" href="https://distantreader.org/apps/homer.zip">https://distantreader.org/apps/homer.zip</a></p></li>
<li><p>uncompress the downloaded zip file and save the result on your desktop</p></li>
<li><p>open the resulting folder/directory, use your text editor to open one or more of the files the folder contains, and notice how each file is simple plain text</p></li>
<li><p>open your terminal application</p></li>
<li><p>change directories to the desktop</p></li>
<li><p>use the following Toolbox command to create a carrel named homer from the homer directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">build</span> <span class="n">homer</span> <span class="n">homer</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
</li>
<li><p>wait patiently</p></li>
</ol>
</div></blockquote>
<p>If this is the first time you’ve created a carrel, then a number of things may go wrong. First of all, the Toolbox may not be able to find a Java archive called Tika. If it is not found, then the Toolbox will try to download it. Second, if the Toobox says that Tika can not be launched, then you probably do not have Java installed. Install Java from <a class="reference external" href="http://java.com">http://java.com</a> and reissue the command. Third, if you have never used a Python module alled SpaCy, then you probably do not have one or more language models installed. When this happens, the Toolbox will ask you if you want to install them. Answer “y”, the modules will be installed, and reissue the build command. All of these things only need to be done once, and the next time things will go much smoother. I promise.</p>
<p>After you issue the build command, the Toolbox will do many things: create a directory where your carrel will be saved, copy the original data to the carrel, do all sorts of feature extraction against it, save the features to sets of delimited files, save (“reduce”) the delimited files to a relational database, and it is these delimited files and relational database from which anaysis is done.</p>
<p>After your carrel is built, you ought to be able to apply just about any Toolbox command to it, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">info</span> <span class="n">homer</span>
<span class="n">rdr</span> <span class="n">ngrams</span> <span class="n">homer</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">s</span> <span class="mi">2</span>
<span class="n">rdr</span> <span class="n">cluster</span> <span class="n">homer</span> <span class="o">-</span><span class="n">v</span>
<span class="n">rdr</span> <span class="n">summarize</span> <span class="n">homer</span>
<span class="n">rdr</span> <span class="n">read</span> <span class="n">homer</span>
</pre></div>
</div>
<p>Once you get this far, you ought to be able to answer all sorts of questions:</p>
<blockquote>
<div><ul class="simple">
<li><p>How many words does the carrel contain, and how big is it compared to other things? (For example, Melville’s <em>Moby Dick</em> is about 220,000 words long, and the <em>Bible</em> is about 800,000 words long.)</p></li>
<li><p>How many items are in the carrel?</p></li>
<li><p>How do the sizes of each item compare?</p></li>
<li><p>What are the most frequent one-word and two-word phrases?</p></li>
<li><p>What are the most frequently mentioned things, what do they do, and how are they described?</p></li>
<li><p>In a very general way, what is the carrrel about?</p></li>
</ul>
</div></blockquote>
<p>Now ask yourself, “If I were given the <em>Iliad</em> and the <em>Odyssey</em> in the form of a book, how quickly would I have been able to the address the questions above?”</p>
<p>For extra credit, repeat the same process as above, but this time use Jane Austen’s <em>Emma</em> as sample data. (Get the data at <a class="reference external" href="https://distantreader.org/apps/austen-emma-1815.zip">https://distantreader.org/apps/austen-emma-1815.zip</a>.) When you are finished, compare and contrast the two carrels. Hopefully the result will raise more questions than answers. At the same time, I believe you will be able to tell a compelling and plausible story.</p>
</section>
<section id="from-your-data">
<h2>From your data<a class="headerlink" href="#from-your-data" title="Permalink to this headline">¶</a></h2>
<p>Creating study carrels from your data is what we are really here to do. Here is one way to make that happen:</p>
<blockquote>
<div><ol class="arabic">
<li><p>create a new folder on your desktop and call it “practice”</p></li>
<li><p>find between six to twelve PDF files on your computer, and copy them to the newly created directory</p></li>
<li><p>open your terminal application</p></li>
<li><p>change directories to the desktop</p></li>
<li><p>use the following Toolbox command to create a carrel named practice from the “practice” directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">build</span> <span class="n">practice</span><span class="o">-</span><span class="n">carrel</span> <span class="n">practice</span><span class="o">-</span><span class="n">carrel</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
</li>
<li><p>wait patiently</p></li>
</ol>
</div></blockquote>
<p>Like before, when things are done, you can now use any Toolbox command against practice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">info</span> <span class="n">practice</span>
<span class="n">rdr</span> <span class="n">bib</span> <span class="n">practice</span>
<span class="n">rdr</span> <span class="n">ngrams</span> <span class="n">practice</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">s</span> <span class="mi">2</span>
<span class="n">rdr</span> <span class="n">cluster</span> <span class="n">practice</span> <span class="o">-</span><span class="n">v</span>
<span class="n">rdr</span> <span class="n">summarize</span> <span class="n">practice</span>
<span class="n">rdr</span> <span class="n">read</span> <span class="n">practice</span>
</pre></div>
</div>
<p>Now you can ask yourself, “How is my newly created carrel similar as well as different from the carrel named homer?”</p>
<p>For all sorts of reasons, you may find fault with the carrel built with your data. This is to be expected and explained in many ways. First and foremost, the sample data was curated; the text was transcribed from a translation of Homer’s works. On the other hand, your text was extracted from PDF files, and consequently the text is not as “clean”, if it exists at all.</p>
<p>Second, your stopword list may need to be updated because the default stop word list is very generic. Edit the stop word list, and repeat the ngrams, summarize, and read commands. The results ought to make more sense.</p>
<p>Third, the Reader becomes more useful as the size of your carrels grows. If you only have six articles to read, then I suggest you read them in the traditional manner. After all, you are smarter than a computer. On the other hand, if you have to read at least two dozen items, then suppliement the reading process with the Toolbox. Your comprehension will increase, some things will be reinforced, and new things will be brought to light.</p>
<p>For extra credit, analyze a set of things found on the Web. Here’s how:</p>
<blockquote>
<div><ol class="arabic">
<li><p>create a new folder on your desktop and call it “hobbies”</p></li>
<li><p>use your Web browser to search for things regarding your… hobby</p></li>
<li><p>open any search result you find interesting</p></li>
<li><p>use your Web browser to save what you see as an HTML file in the “hobbies” directory</p></li>
<li><p>go to Step #3 a dozen times or until you get tired</p></li>
<li><p>open your terminal, change directorires to the desktop, and create a carrel based on the directory named “hobbies”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">build</span> <span class="n">hobbies</span> <span class="n">hobbies</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<p>The point of the extra credit exercise it to demonstrate that the Reader Toolbox can process many different types of files. Plain text. HTML. Word documents. PDF files. Email messages. Etc. All you have to do is put files in a directory and run the rdr build command against it.</p>
</section>
<section id="with-secret-sauce">
<h2>With secret sauce<a class="headerlink" href="#with-secret-sauce" title="Permalink to this headline">¶</a></h2>
<p>Study carrels can be created from just about any individual folder/directory filled with files. It does not matter how many files there are. It does not matter what type of files they are. It does not matter what the names of the files are. Put a bunch o’ files in a directory, and use the Toolbox’s build command against the directory.</p>
<p>But your carrels will take on a much greater meaning if you add the Toolbox’s “secret sauce”. That secret sauce is a file, or more specifically, a comma-separted value (.csv) file named metadata.csv. If a directory contains a file named metadata.csv, and if the file is a comma-separated values file, and if the file contains columns named “author”, “title”, “date”, and/or “file”, and if each cell in the file column is the name of a file in the given directory, then the Toolbox will read the metadata file as it imports the data, and each of your files will be associated with author, title, and date values.</p>
<p>A metadata.csv file becomes indispensable when you want to compare extracted features to authors, titles, and dates. In this way you will be able to ask questdions like, “How do the authors’ ideas compare?”, or “How does an idea ebb &amp; flow over time or throughout the corpus?”</p>
<p>As an example try this:</p>
<blockquote>
<div><ol class="arabic">
<li><p>download the zip file at <a class="reference external" href="https://distantreader.org/apps/homer-austen-thoreau.zip">https://distantreader.org/apps/homer-austen-thoreau.zip</a>; the file includes Homer’s <em>Illiad</em> and <em>Odyssey</em>, Jane Austen’s <em>Emma</em>, and Henry David Thoreau’s <em>Walden</em>.</p></li>
<li><p>uncompress the downloaded zip file and save the result on your desktop</p></li>
<li><p>inside the newly uncompressed folder ought to be a file called “metadata.csv”; open metadata.csv with your spreadsheet applcation and notice how there are four colums: file, author, title, and date</p></li>
<li><p>open your terminal application</p></li>
<li><p>change directories to the desktop</p></li>
<li><p>use the following Toolbox command to create a carrel named homer-austen-thoreau from the homer-austen-thoreau directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">build</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
</li>
<li><p>wait patiently; if you had two read four novels, it would take you a long time too</p></li>
</ol>
</div></blockquote>
<p>Once your carrel is built, you ought to do everything as before, but some of the Toolbox’s output be more meaningful. For example, the bib command will list the authors, titles, and dates. You will be able to search via author’s name using the search command. After doing topic modeling, you will be able to pivot the underlying model and see how things compare to authors or dates. Try the following comands to see what I mean::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rdr</span> <span class="n">info</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span>
<span class="n">rdr</span> <span class="n">bib</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span>
<span class="n">rdr</span> <span class="n">search</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span> <span class="o">-</span><span class="n">q</span> <span class="n">author</span><span class="p">:</span><span class="n">homer</span> <span class="o">|</span> <span class="n">more</span>
<span class="n">rdr</span> <span class="n">tm</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span>
<span class="n">rdr</span> <span class="n">tm</span> <span class="n">homer</span><span class="o">-</span><span class="n">austen</span><span class="o">-</span><span class="n">thoreau</span> <span class="o">-</span><span class="n">p</span> <span class="n">read</span> <span class="o">-</span><span class="n">o</span> <span class="n">chart</span> <span class="o">-</span><span class="n">y</span> <span class="n">barh</span> <span class="o">-</span><span class="n">f</span> <span class="n">author</span>
</pre></div>
</div>
<p>After you run the last command, you ought to see a horizontal bar chart illustrating the degree each author wrote about the computed topics. Notice how each author’s writings are distinct. Put in the form of questions, “What did Austen write about, what did Homer write about, and what did Thoreau write about?”</p>
<img alt="_images/build-01.png" src="_images/build-01.png" />
<p>Adding a metadata.csv file literally adds four new dimenstions to your study carrel, dimensions that we often take for granted. Creating a metadata.csv file can be challenging though. On the other hand, everybody has a spreadsheet application at their disposal, and it is not difficult to identify the author, title, date, and file name of each of your files. Right?  :)</p>
</section>
<section id="helper-applications">
<h2>Helper applications<a class="headerlink" href="#helper-applications" title="Permalink to this headline">¶</a></h2>
<p>Even in this age when we feel we are drinking from the proverbial firehose, it is it can be quite challenging to create a folder/directory, fill it with content, and describe each file with some metadata. To make my life easier, I have written the following scripts that create such data structures for me, and they are created from folders of content, the content of email messages, content from the HathiTrust, and things like novels filled with chapters. The items below outline and point to such tools:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><a class="reference external" href="https://github.com/ericleasemorgan/folder2metadata">folder2metadata</a> - Given a directory containing files named in a particular way (author-title-date), this Python script outputs a CSV file suitable for the Reader</p></li>
<li><p><a class="reference external" href="https://github.com/ericleasemorgan/mbox2reader">mbox2reader</a> - Given a few configurations, this Python script reads an mbox file (a set of email messages), and outputs a file system amenable to the Reader</p></li>
<li><p><a class="reference external" href="https://github.com/ericleasemorgan/htid2books">htid2books</a> - Given an HathiTrust access key, HathiTrust secret token, and a HathiTrust identifier, this set of Bash/Perl scripts output plain text as well as PDF versions of a book; use these scripts to get the content for a study carrel</p></li>
<li><p><a class="reference external" href="https://github.com/ericleasemorgan/txt2chapters">txt2chapters</a> - Given a plain text file, a pattern, and a directory, this Perl script subdivides the file into chapters saved in the directory</p></li>
</ol>
</div></blockquote>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>When it comes to the Toolbox, creating study carrels is where the power is. The process requires practice. Create a directory. Fill it with files. Build a carrel. Repeat. The process is iterative, and with each iteration the use and understanding of the directory’s content will increase.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Reader Toolbox</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="definitions.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_01-quick_start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_02-introduction.html">Exercise: Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Exercise: Building carrels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#from-sample-data">From sample data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-your-data">From your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#with-secret-sauce">With secret sauce</a></li>
<li class="toctree-l2"><a class="reference internal" href="#helper-applications">Helper applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Structure of a carrel</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="quips.html">Quips</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_04-word_clouds.html">Exercise: Word Clouds</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_05-searching.html">Exercise: Searching</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_06-topic_modeling.html">Exercise: Topic modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_07-network_graphs.html">Exercise: Network graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise_08-normalizing_data.html">Exercise: Normalizing</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Python Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="usecases.html">Use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">Supporting software</a></li>
<li class="toctree-l1"><a class="reference internal" href="author.html">About the author</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="commands.html" title="previous chapter">Commands</a></li>
      <li>Next: <a href="structure.html" title="next chapter">Structure of a carrel</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, University of Notre Dame.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/exercise_03-building_carrrels.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>